
html, body{
   min-height:100%;
   margin:0;
   height: 100%;
   background-color: $colour_page;
  /* scroll-behavior: smooth; */
   max-width: 100%;
   position: relative;
}
html{
   overflow-x: hidden;
}

/* ****************************** */
/* **** Page Header ****
/* ****************************** */

.site_top{
   position: fixed;
   z-index:200;
   font-family: $font_title;
   padding: 50px 0 0 50px;

   @include small-desktop{
      padding: 0;
      position: absolute;
      margin:0 auto;
      text-align: center;
      top: 0;
      left: 0;
      right: 0;
   }

   .site_name{
      position: relative;
      z-index:200;
      background-color:$colour_page;

      @include small-desktop{
         padding: 40px 25px 0;
         display: flex;
         flex-direction: column;
         align-items: center;
         background: none;
      }
   }

   h1 {
      margin: 0;
      display:inline-block;
      z-index:100;
      a{
         text-indent: -9485px;
         background-image: url("images/cave_logo.svg?sanitize=true"); /* appended query needed for stupid Github bug */
         /* https://stackoverflow.com/a/16462143/10240581 */
         background-size: contain;
         background-position: left bottom;
         background-repeat: no-repeat;
         display:block;
         position: relative;
         width:140px;
         height:63px;
         z-index:50;

         @include small-desktop{
            width: 120px;
            height: auto;
         }
      }
   }
   h3{
      font-weight:300;
      text-transform: lowercase;
      font-family: $font_title;
      line-height:1.3em;
      position: relative;
      z-index:50;
      font-size: 18px;
      margin: 1em 0;

      @include small-desktop{
         margin-bottom: 0;
         padding-bottom: 1em;

         /* Cover for pop down menu */
         &:after{
            content: "";
            display: block;
            background: white;
            width: 150%;
            height: 1000px;
            position: absolute;
            bottom: 0;
            z-index: -10;
            left: -25%;
         }
      }
   }

   .open_menu{
      display: none;
      position: absolute;
      width: 150px;
      margin-left: -75px;
      bottom: -30px;
      z-index: 700;
      padding: 0 10px;
      line-height: 30px;
      left: 50%;
      text-transform: uppercase;

      @include small-desktop{
         display: block;
      }

      &.open{
         display: none;
      }
   }
   
   nav{
      font-weight:300;
      position: relative;
      z-index:500;
      float: left;
      
      @include small-desktop{
         float: none;
         text-align: center;
         z-index: 150;
         transform: translateY(-100%);
         transition: transform 0.35s $transition_quiver;

         > * {
            transition: opacity 0.35s linear;
            opacity: 0;
         }
      }

      &.open {
         transform: translateY(0%);

         > * {
            opacity: 1;
         }
      }

      .mobile_menu{
         @include not-small-desktop{
            display: none;
         }
      }
   }

   a{
      color: #000;
      text-decoration: none;
      padding: 2px 10px;

      @include small-desktop{
         display: inline-block;
      }
   }
   a:hover{
      text-decoration: underline;
      color: rgb(0,100,221);

      @include small-desktop{
         text-decoration: none;
      }
   }

   ul{
      margin: 1em 0 0;
      padding:0;
      list-style:none;
      transition: transform 0.15s $transition_quiver;

      @include small-desktop{
         display: flex;
         flex-direction: column;
         align-items: center;
      }

      li{
         line-height: 1.5em;
         font-size: 18px;
         transition: transform 0.15s $transition_quiver;

         @include small-desktop{
            display: inline-block;
         }

         a{
            padding-left: 0px;
         }

         &:hover{
            transform: translateX(4px);

            @include small-desktop{
               transform: none;
            }
         }
      }

      &.social{
         opacity: 0;
         transition: all 0.2s $transition_quiver; 

         @include small-desktop{
            opacity: 1;
            flex-direction: row;
            justify-content: center;
         }

         li{
            position: relative;

            &:before{
               background-image: none;
               background-repeat: no-repeat;
               background-position: left 60%;
               background-size: auto 75%;
               content: "";
               display: block;
               position:absolute;
               left: 0;
               top: 0;
               right: 0;
               bottom: 0;
               height: 100%;
               z-index: 10;
               filter:grayscale(100%);
               transition: filter 0.2s ease-in-out;  

               @include small-desktop{
                  background-position: center center;
               }
            }

            &.instagram:before{ background-image: url("images/icons/instagram.svg"); }
            &.linkedin:before{ background-image: url("images/icons/linkedin.svg"); }
            &.twitter:before{ background-image: url("images/icons/twitter.svg"); }
            &.github:before{ background-image: url("images/icons/github.svg"); }
            &.email:before{ background-image: url("images/icons/email.svg"); }

            &.close_menu{
               margin-top: 20px;
            }


            &:hover:before{
               filter:grayscale(0%);
            }

            a{
               text-decoration: none;
               z-index: 20;
               position: relative;

               &:not(.close_menu){
                  padding-left: 1.5em;
               }

               &:hover{
                  text-decoration: underline;
               }

               @include small-desktop{
                  width: 30px;
                  height: 30px;
                  padding: 4px;
                  text-indent: -9384px;
               }
            }
         }
      }
   }
}

/* ****************************** */
/* ** Angled background effect **
/* ****************************** */
   
.site_name:after, nav:after{
   content: "";
   background-color: $colour_page;
   display:block;
   position:absolute;
   width: 2000px;
   transform-origin: center bottom;
   z-index:10;
   bottom: -25px;
   right: 0px;
   transform: translateX(50%) rotate(-55deg);
   height: 2000px;
   outline-offset: 10px;
   outline: 8px solid $colour_page;
   transition: all 0.2s $transition_quiver; 

   @include small-desktop{
      display: none;
   }
}

nav:after{
   display: none; 
   transform: translateX(50%) rotate(-10deg);
   z-index: -10;
   right: 50%;

   @include small-desktop{
      display: block;
   }
}

header:hover{
   .site_name:after{
      transform: translateX(50%) rotate(-65deg);
   }
   
   ul.social{
      opacity: 1;
   }
   a{
      @include not-small-desktop{
         text-decoration: underline;
      }
   }
}


/* ****************************** */
/* **** Homepage Background ****
/* ****************************** */

.intro_bg{
   width:100%;
   position: relative;
   height: 100%;
   background: url("images/backgrounds/wi-sculpting.jpg") no-repeat;
   /* hmi pic: color-burn / burlywood */
   background-position: 60% center;
   background-size: cover;
   display: flex;
   justify-content: center;
   align-items: center;
}
.intro_bg:before{
   content: "";
   background-color: #7500DE;
   mix-blend-mode: saturation;
   position: absolute;
   width: 100%;
   height: 100%;
   display:block;
}

.tagline{
   font-size: 48px;
   font-weight:500;

   @include small-desktop{
      font-size: 36px;
      flex-direction: column;

   }
   .links{
      @include small-desktop{
         flex-direction: row;
         margin: 15px 0;
      }
   }

   a{
      animation: shake 3s linear 3s infinite;
      padding: 2px 15px;
      margin: 10px 25px;
      font-weight: 900;

      @include small-desktop{
         margin: 10px 10px;
      }
   }
   a:nth-of-type(2){
      animation: shake 3s linear 3.1s infinite;
   }
   a:focus{
      outline-offset: 7px;
      outline: 5px solid white;
   }
}


/* ****************************** */
/* ****    Main page body    ****
/* ****************************** */

main{
   max-width: 1000px;
   margin: 10px auto;
   max-width: calc(100% - 300px - 300px);
   z-index: 500;
   position: relative;
   font-family: $font_body;

   .panel_full_width{
      margin: 30px auto;
      padding: 30px 0;
      max-width: 90ch;
      font-size: 20px;

      @include small-desktop{
         padding: 0;
      }
   }

   @include column-margin-collapse-right {
      margin-left: 300px;
      margin-right: 30px; 
      max-width: calc(100% - 300px - 30px);
   }
   
   @include small-desktop {
      margin-left: 25px;
      margin-left: 25px;
      max-width: 100%;
      background: white;
   }
}


main.text_column{
   font-size: 20px;
   max-width: 90ch;
}
